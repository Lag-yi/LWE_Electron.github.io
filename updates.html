<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨æ€ Â· LWE_Electron</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .updates-list {
            list-style: none;
            padding: 0;
        }
        .update-item {
            background: var(--bg-card);
            border: 1px solid var(--border-glow);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.2s;
        }
        .update-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.2);
        }
        .update-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        .update-meta {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
        }
        .update-body {
            color: var(--text-light);
            line-height: 1.6;
        }
        .update-body img {
            max-width: 100%;
            border-radius: 8px;
        }
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-dim);
        }
        .error {
            color: #f87171;
            text-align: center;
            padding: 2rem;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">âš¡ LWE_Electron</a>
            <ul class="nav-links">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="index.html#mod">æˆ‘ä»¬åœ¨åšä»€ä¹ˆ</a></li>
                <li><a href="index.html#credits">æˆ‘ä»¬æ˜¯è°</a></li>
                <li><a href="updates.html" class="active">åŠ¨æ€</a></li>
                <li><a href="forum.html">ç•™è¨€æ¿</a></li>
                <li><a href="https://github.com/Lag-yi" target="_blank"><i class="fab fa-github"></i> GitHub</a></li>
            </ul>
        </div>
    </nav>

    <header class="page-header">
        <div class="container">
            <h1>ğŸ“¢ æœ€æ–°åŠ¨æ€</h1>
            <p>æ¨¡ç»„æ›´æ–°ã€å¼€å‘è¿›åº¦ã€ä»¥åŠå„ç§ç¢ç¢å¿µ</p>
        </div>
    </header>

    <section class="updates-content">
        <div class="container">
            <div id="updates-container" class="loading">
                <i class="fas fa-spinner fa-pulse"></i> åŠ è½½ä¸­...
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>Â© 2026 LWE_Electron Â· ç”¨å‘¨æœ«å’Œå‡æœŸåšçš„é¡¹ç›®</p>
            <p>åŠ¨æ€è‡ªåŠ¨ä» GitHub Issues æŠ“å– | <a href="https://github.com/Lag-yi/LWE_Electron.github.io/issues" target="_blank">å» GitHub å‘å¸ƒæ–°åŠ¨æ€</a></p>
        </div>
    </footer>

    <script>
        // æ›¿æ¢ä¸ºä½ çš„ GitHub ä»“åº“ä¿¡æ¯
        const REPO_OWNER = 'Lag-yi';          // ä½ çš„ GitHub ç”¨æˆ·å
        const REPO_NAME = 'LWE_Electron.github.io';  // å­˜æ”¾å®˜ç½‘çš„ä»“åº“åï¼ˆä¹Ÿå¯ä»¥æ˜¯æ¨¡ç»„ä»“åº“ï¼Œå»ºè®®ç»Ÿä¸€ï¼‰
        const LABEL = 'æ›´æ–°';                   // åªæ˜¾ç¤ºå¸¦è¿™ä¸ªæ ‡ç­¾çš„ Issue

        async function fetchUpdates() {
            try {
                const response = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues?labels=${LABEL}&state=open&sort=created&direction=desc`);
                if (!response.ok) throw new Error('ç½‘ç»œé”™è¯¯');
                const issues = await response.json();
                renderUpdates(issues);
            } catch (error) {
                document.getElementById('updates-container').innerHTML = `<div class="error"><i class="fas fa-exclamation-triangle"></i> åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</div>`;
                console.error(error);
            }
        }

        function renderUpdates(issues) {
            const container = document.getElementById('updates-container');
            if (issues.length === 0) {
                container.innerHTML = '<div class="error">âœ¨ è¿˜æ²¡æœ‰åŠ¨æ€ï¼Œå» GitHub å‘å¸ƒä¸€æ¡å§ï¼</div>';
                return;
            }

            const html = issues.map(issue => `
                <div class="update-item">
                    <div class="update-title">${issue.title}</div>
                    <div class="update-meta">
                        <span><i class="far fa-calendar-alt"></i> ${new Date(issue.created_at).toLocaleDateString('zh-CN')}</span>
                        <span><i class="far fa-user"></i> ${issue.user.login}</span>
                    </div>
                    <div class="update-body">${marked.parse(issue.body || '')}</div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // å¼•å…¥ marked åº“è§£æ Markdownï¼ˆè®© Issue å†…å®¹æ˜¾ç¤ºä¸ºæ ¼å¼åŒ–æ–‡æœ¬ï¼‰
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
        script.onload = fetchUpdates;
        document.head.appendChild(script);
    </script>
</body>
</html>